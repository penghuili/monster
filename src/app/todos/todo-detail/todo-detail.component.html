<ng-container *ngIf="todo">
  <div class="mst-todo-detail-title-wrapper">
    <mst-input
      [control]="titleControl"
      [padding]="'0.5rem 2rem 0.5rem 0.5rem'"
      [hasError]="hasError"></mst-input>
    <div class="mst-start-todo" *ngIf="todo.expectedTime">
      <mst-icon name="play_circle_filled" (click)="onStart()" *ngIf="!isDoing"></mst-icon>
      <mst-icon name="pause_circle_filled" (click)="onStop()" *ngIf="isDoing"></mst-icon>
    </div>
  </div>


  <div fxLayout="row" fxLayoutAlign="space-between" [mstPadding]="'1rem 0'">
    <mst-project-list
      [activeProject]="currentSubproject"
      [showAll]="false"
      (selected)="onSelectProject($event)">
    </mst-project-list>
    <mst-datepicker [defaultDate]="todo.happenDate" (finish)="onFinishPickDate($event)"></mst-datepicker>
    <mst-duration-picker [duration]="todo.expectedTime" (change)="onDurationChange($event)"></mst-duration-picker>
  </div>

  <mst-todo-timer *ngIf="todo.expectedTime" [todo]="todo"></mst-todo-timer>

  <mst-input
    [control]="noteControl"
    minHeight="3rem"></mst-input>
  
  <div fxLayout="row" fxLayoutAlign="space-between" [mstPadding]="'2rem 0 0'">
    <mst-icon name="chevron_left" (click)="onBack()"></mst-icon>
    <mst-icon-done [isFilled]="true" (click)="onFinish()"></mst-icon-done>
  </div>
</ng-container>
