<div [mstPadding]="'0 0 1rem'" *ngIf="showSearch">
  <mst-search-todos [todos]="todos"></mst-search-todos>
</div>

<mst-todos-tab [projectsWithTodos]="projectsWithTodos"></mst-todos-tab>

<mst-todos-habits></mst-todos-habits>

<ng-container *ngIf="activeBookItems && activeBookItems.length > 0">
  <div>reading</div>
  <div [mstPadding]="'0 0 0.5rem 1rem'">
    <mst-book-chapter-item *ngFor="let item of activeBookItems" [bookItem]="item">
    </mst-book-chapter-item>
  </div>
</ng-container>

<ng-container *ngIf="activeProjectsWithTodos && activeProjectsWithTodos.length > 0">
  <div *ngFor="let pwts of activeProjectsWithTodos">
    <div *ngIf="pwts.todos.length > 0">
      {{pwts.project.title}} {{ pwts.todos | expectedTime | minuteFormatter }}
    </div>
    <div [mstPadding]="'0.5rem 0 0.5rem 1rem'" *ngIf="pwts.todos.length > 0">
      <mst-drop-zone [dragIndex]="dragIndex" (drop)="onDrop($event, pwts.project.id)">
        <mst-drag-item *ngFor="let todo of pwts.todos; let i = index;"
          [item]="todo"
          [index]="i"
          (start)="onDragStart($event, pwts.project.id)">
          <mst-todo-item
            [todo]="todo"
            (click)="onShowDetail(todo)">
          </mst-todo-item>
        </mst-drag-item>
      </mst-drop-zone>
    </div>
  </div>
</ng-container>

<ng-container *ngIf="hasDone && activeTab === TODAY">
  <div [mstTextAlign]="'center'" [mstPadding]="'2rem 0 0'">Done</div>
  <div *ngFor="let pwts of doneProjectsWithTodos">
    <div [mstPadding]="'0.5rem 0 0'" *ngIf="pwts.todos.length > 0">
      {{pwts.project.title}}
    </div>
    <div [mstPadding]="'0.5rem 0 0.5rem 1rem'" *ngIf="pwts.todos.length > 0">
      <mst-todo-item *ngFor="let todo of pwts.todos"
        [todo]="todo"
        (click)="onShowDetail(todo)">
      </mst-todo-item>
    </div>
  </div>
</ng-container>
